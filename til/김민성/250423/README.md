# 채널톡 SPA 환경에 적용하기 - React 프로젝트 적용 TIL

오늘 React 프로젝트에 채널톡을 적용하는 과정을 진행했습니다. 채널톡은 고객 소통 및 지원 플랫폼으로, 웹사이트에 채팅 기능을 쉽게 추가할 수 있게 해주는 서비스입니다.

## 학습 내용

### 1. SPA vs MPA의 차이점
- **MPA(Multi-Page Application)**: 각 페이지를 요청할 때마다 새로운 정적 리소스를 로드하는 방식
- **SPA(Single Page Application)**: 최초 한 번만 페이지를 로드하고, 이후에는 필요한 데이터만 서버에서 가져와 동적으로 페이지를 갱신하는 방식
- React는 SPA 프레임워크이기 때문에 MPA와는 다른 방식으로 채널톡을 설치해야 함

### 2. 채널톡 서비스 클래스 생성
- SPA 환경에서 채널톡을 사용하기 위해 별도의 서비스 클래스를 생성
- TypeScript 사용 시 인터페이스도 함께 정의됨

### 3. 채널톡 초기화 과정
- **loadScript()**: 채널톡 스크립트를 로드하는 함수
- **boot()**: 채널톡 서비스를 초기화하는 함수, 사용자 정보와 함께 호출 가능

### 4. 컴포넌트 분리를 통한 구조화
- `App.tsx`에 직접 채널톡 코드를 작성하는 대신, 별도의 컴포넌트(`ChannelTalkLoader`)를 생성하여 관심사 분리
- 이를 통해 코드 가독성과 유지보수성 향상

### 5. 사용자 인증 정보 연동
- Zustand 상태 관리 라이브러리를 사용해 관리되는 사용자 인증 정보를 채널톡에 연동
- 로그인 상태에 따라 익명 사용자 또는 인증된 사용자로 채널톡 초기화
- `isAuthenticated`와 `userInfo` 상태에 따라 조건부 초기화 설정

### 6. 의존성 배열과 useEffect
- `useEffect`의 의존성 배열에 `isAuthenticated`와 `userInfo`를 추가하여 로그인 상태 변화에 따라 채널톡이 재초기화되도록 설정

## 결론

react 프로젝트에 서드파티 프로그램을 이식하는 과정을 처음 겪어 보았고, 해당 과정에서 서드파티 프로그램과 데이터를 주고받는 방식에 대한 이해도를 높일 수 있었습니다.