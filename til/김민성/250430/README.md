# 간호사 시스템 설계의 효율성과 그룹 기능에 대한 TIL

## 기존 vs 새 데이터 모델 선택의 원칙

오늘 간호사 스케줄링 시스템에 새로운 기능을 추가할 때, 기존 데이터 모델을 활용할지 아니면 새로운 데이터 모델을 설계할지에 대한 의사결정 과정을 배웠다.

### 소프트웨어 설계 효율성 관련 핵심 원칙
- **KISS 원칙**: Keep It Simple, Stupid - 시스템은 가능한 한 단순하게 설계
- **YAGNI 원칙**: You Aren't Gonna Need It - 실제로 필요할 때까지 기능 추가 자제
- **DRY 원칙**: Don't Repeat Yourself - 코드 중복을 최소화, 재사용성 극대화
- **기술 부채**: 빠른 구현을 위한 단기적 해결책이 미래에 발생시키는 비용
- **점진적 설계**: 처음부터 완벽보다는 시간에 따라 진화하는 설계 방식

### 병동 간 간호사 그룹 일정 공유 설계
기존 WardMember를 활용하는 접근법과 새로운 엔티티를 설계하는 접근법을 비교했을 때:

**최적 접근법**: 기존 WardMember 활용 + 최소한의 새 엔티티 추가
- **NurseCircle**: 간호사 그룹 정보 저장
- **CircleMembership**: 그룹과 WardMember 연결, 공유 수준 제어
- **접근 권한**: 읽기 전용 접근으로 WardSchedule 직접 수정 방지

이 접근법은 빠른 개발, 데이터 일관성 유지, 기존 시스템과의 쉬운 통합이 가능하면서도 필요한 기능을 모두 제공할 수 있다.

## 캘린더 기능의 데이터 관리 전략

캘린더 기능 구현 시 데이터 관리 전략에 대해서도 배웠다.

### 두 가지 접근법 비교
1. **개인 일정을 RDB로 별도 관리**
   - 장점: 빠른 검색 속도, 전용 인덱싱 최적화
   - 단점: 데이터 동기화 필요, 저장 공간 증가

2. **병동 전체 근무표에서 필터링**
   - 장점: 항상 최신 데이터 보장, 동기화 문제 없음
   - 단점: 불필요한 데이터 로드, 네트워크 부하 증가

### 병동 규모별 최적 접근법
- **소규모 병동**: 필터링 방식이 효율적
- **중간 규모 병동**: 하이브리드 접근 + 캐싱
- **대규모 병동**: 별도 RDB + 동기화 메커니즘

## 그룹핑 시스템과 연동된 캘린더 설계

최종적으로 그룹핑 시스템과 연동된 캘린더 기능을 위해 이벤트 소싱 패턴과 읽기 전용 뷰를 결합한 설계를 배웠다.

### 핵심 구성 요소
- **PersonalCalendar**: 읽기 최적화된 개인 일정 뷰
- **ScheduleChangeEvent**: 일정 변경 이벤트 스트림
- **CircleCalendarAccess**: 그룹 내 캘린더 접근 제어

### 데이터 흐름
1. 초기 데이터 로드: 최적화된 개인 캘린더에서 로드
2. 실시간 업데이트: 이벤트 기반 동기화
3. 그룹 캘린더 조회: 각 멤버의 캘린더 데이터 조합 + 접근 제어

### 성능 최적화 전략
- 지연 로딩: 필요한 데이터만 로드
- 증분 동기화: 변경된 부분만 동기화
- 캐싱 계층화: 클라이언트/서버/DB 각 계층별 캐싱
- 배치 처리: 여러 변경사항 일괄 처리

이 설계는 높은 읽기 성능, 데이터 일관성, 확장성, 유연한 접근 제어를 모두 제공한다.

## 결론

소프트웨어 설계에서는 항상 Trade-off가 존재한다. 기존 모델 활용 vs 새 모델 설계, 성능 vs 개발 속도, 복잡성 vs 단순성 등의 균형을 잘 맞추는 것이 중요하다. 

이번 학습을 통해 데이터베이스 설계 시 고려해야 할 다양한 관점과 효율성을 높이기 위한 패턴들을 배웠다. 실제 시스템 구현 시에는 현재 사용자 수, 예상 데이터 양, 접근 패턴 등을 고려해 최적의 설계를 선택해야 한다.