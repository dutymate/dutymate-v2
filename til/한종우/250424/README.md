# Today I Learned

> 2025년 04월 24일

## RDS 인스턴스 암호화

RDS 인스턴스 암호화는 AWS에서 제공하는 기능으로, RDS 인스턴스의 데이터를 암호화하여 보안을 강화하는 방법이다. 이 기능을 사용하면 데이터베이스에 저장된 데이터가 암호화되어 외부에서 접근할 수 없게 된다.

## RDS 인스턴스 암호화 방법

운영 중인 RDS 인스턴스를 암호화할 수는 없다. 따라서, 해당 인스턴스의 스냅샷을 생성하고 새로운 인스턴스를 생성하여 암호화된 스냅샷을 사용해야 한다. 이 과정에서 기존 인스턴스의 데이터를 새로운 인스턴스로 복사하게 된다.

1. **스냅샷 생성**: 기존 RDS 인스턴스의 스냅샷을 생성한다.
2. **스냅샷 암호화**: 생성한 스냅샷을 암호화한다.
3. **새로운 인스턴스 생성**: 암호화된 스냅샷을 사용하여 새로운 RDS 인스턴스를 생성한다.
4. **기존 인스턴스 삭제**: 새로운 인스턴스가 정상적으로 작동하는 것을 확인한 후, 기존 인스턴스를 삭제한다.

## RDS 인스턴스 암호화 시 주의사항

스냅샷 생성에 문제가 있을 경우, 기존 인스턴스의 데이터가 손실될 수 있으므로, 스냅샷 생성 후에는 반드시 새로운 인스턴스가 정상적으로 작동하는지 확인해야 한다.

새벽에 데이터베이스 암호화 작업을 진행하면서 스냅샷으로 생성한 인스턴스가 정상적으로 작동하지 않았다.
기존과 동일한 이름의 인스턴스를 생성하기 위해 기존 인스턴스를 삭제하고 새로운 인스턴스를 생성했지만, 기존 인스턴스의 데이터를 찾을 수 없었다.

다행히도 암호화되지 않은 스냅샷을 활용해 기존 인스턴스를 복구할 수 있었다.
이후, 암호화된 스냅샷을 사용하여 새로운 인스턴스를 생성하고, 기존 인스턴스를 삭제했다.
